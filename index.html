<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Bilderr√§tsel</title>

<style>
body {
  margin: 0;
  background: #111;
  color: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
}

h1 { margin: 10px 0; }

#bild {
  max-width: 90%;
  max-height: 70vh;
  margin-top: 10px;
}

#loesung {
  display: none;
  font-size: 2em;
  margin-top: 15px;
  color: #00ffcc;
}

button {
  font-size: 1.1em;
  padding: 10px 18px;
  margin: 6px;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>Bilderr√§tsel</h1>

<img id="bild">
<div id="loesung"></div>

<div>
  <button onclick="zurueck()">‚Üê Zur√ºck</button>
  <button onclick="weiter()">Weiter ‚Üí</button>
  <button onclick="fullscreen()">Fullscreen</button>
</div>

<script>
// ===================
// üîß ANPASSEN
// ===================
const GITHUB_USER = "DieZiege1337";
const GITHUB_REPO = "wasistdas";
const ORDNER = "bilder";
// ===================

let bilder = [];
let index = 0;
let loesungSichtbar = false;

async function ladeBilder() {
  const url = `https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/${ORDNER}`;
  const res = await fetch(url);
  const daten = await res.json();

  bilder = daten
    .filter(f => f.type === "file" && f.name.match(/\.(jpg|jpeg|png|webp)$/i))
    .map(f => ({
      src: f.download_url,
      loesung: f.name
        .replace(/\.[^/.]+$/, "")
        .replace(/[_-]/g, " ")
    }));

  if (!bilder.length) {
    alert("Keine Bilder gefunden.");
    return;
  }

  shuffle(bilder);
  anzeigen();
}

// Zuf√§llige Reihenfolge
function shuffle(a) {
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
}

function anzeigen() {
  document.getElementById("bild").src = bilder[index].src;
  const l = document.getElementById("loesung");
  l.innerText = bilder[index].loesung;
  l.style.display = "none";
  loesungSichtbar = false;
}

function weiter() {
  if (!loesungSichtbar) {
    document.getElementById("loesung").style.display = "block";
    loesungSichtbar = true;
  } else if (index < bilder.length - 1) {
    index++;
    anzeigen();
  }
}

function zurueck() {
  if (index > 0) {
    index--;
    anzeigen();
  }
}

function fullscreen() {
  document.documentElement.requestFullscreen();
}

// Tastatur
document.addEventListener("keydown", e => {
  if (e.key === "ArrowRight" || e.key === " ") weiter();
  if (e.key === "ArrowLeft") zurueck();
});

// Start
ladeBilder();
</script>

</body>
</html>
