<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Was ist das?!</title>

<style>
body {
  margin: 0;
  background: #111;
  color: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
}

h1 { margin: 10px 0; }

#bild {
  max-width: 90%;
  max-height: 70vh;
  margin: 10px auto;
}

#loesung {
  display: none;
  font-size: 2em;
  margin-top: 15px;
  color: #00ffcc;
}

button {
  font-size: 1.1em;
  padding: 10px 18px;
  margin: 6px;
  cursor: pointer;
}

#topbar {
  margin-bottom: 10px;
}

#ende {
  display: none;
  font-size: 2.5em;
  margin-top: 40px;
  color: #00ffcc;
}
</style>
</head>

<body>

<h1>Bilderr√§tsel</h1>

<div id="topbar">
  <button onclick="startModus('leicht')">Leicht</button>
  <button onclick="startModus('schwer')">Schwer</button>
  <button onclick="startModus('neu')">Neu</button>
  <button onclick="neuMischen()">Neu mischen</button>
  <button onclick="fullscreen()">Fullscreen</button>
</div>

<img id="bild">
<div id="loesung"></div>
<div id="ende">üéâ Runde geschafft!</div>

<div>
  <button onclick="zurueck()">‚Üê Zur√ºck</button>
  <button onclick="weiter()">Weiter ‚Üí</button>
</div>

<script>
// ===================
// üîß ANPASSEN
// ===================
const GITHUB_USER = "DieZiege1337";
const GITHUB_REPO = "wasistdas";
// ===================

let bilder = [];
let original = [];
let index = 0;
let loesungSichtbar = false;
let aktuellerOrdner = "";

// Bilder aus GitHub laden
async function ladeBilder(ordner) {
  aktuellerOrdner = ordner;
  document.getElementById("ende").style.display = "none";

  const url = `https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/${ordner}`;
  const res = await fetch(url);
  const daten = await res.json();

  original = daten
    .filter(f => f.type === "file" && f.name.match(/\.(jpg|jpeg|png|webp)$/i))
    .map(f => ({
      src: f.download_url,
      loesung: f.name
        .replace(/\.[^/.]+$/, "")
        .replace(/[_-]/g, " ")
    }));

  if (!original.length) {
    alert("Keine Bilder im Ordner: " + ordner);
    return;
  }

  neuMischen();
}

function neuMischen() {
  bilder = [...original];
  shuffle(bilder);
  index = 0;
  anzeigen();
}

// Zufallsmischer
function shuffle(a) {
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
}

function anzeigen() {
  document.getElementById("bild").style.display = "block";
  document.getElementById("bild").src = bilder[index].src;
  document.getElementById("loesung").innerText = bilder[index].loesung;
  document.getElementById("loesung").style.display = "none";
  document.getElementById("ende").style.display = "none";
  loesungSichtbar = false;
}

function weiter() {
  if (!loesungSichtbar) {
    document.getElementById("loesung").style.display = "block";
    loesungSichtbar = true;
  } else if (index < bilder.length - 1) {
    index++;
    anzeigen();
  } else {
    document.getElementById("bild").style.display = "none";
    document.getElementById("loesung").style.display = "none";
    document.getElementById("ende").style.display = "block";
  }
}

function zurueck() {
  if (index > 0) {
    index--;
    anzeigen();
  }
}

function startModus(name) {
  ladeBilder(name);
}

function fullscreen() {
  document.documentElement.requestFullscreen();
}

// Tastatur
document.addEventListener("keydown", e => {
  if (e.key === "ArrowRight" || e.key === " ") weiter();
  if (e.key === "ArrowLeft") zurueck();
});

// Startstandard
startModus("leicht");
</script>

</body>
</html>


